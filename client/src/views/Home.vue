<template>
  <main>
    <MainBanner />
    <section class="about-section">
      <div class="container">
        <div class="about-content">
          <div class="about-image">
            <img src="/images/home.png" alt="Karina">
          </div>
          <div class="about-text">
            <h2 class="section-title">–ú–µ–Ω–µ –∑–≤–∞—Ç–∏ –ö–∞—Ä—ñ–Ω–∞ —ñ –æ—Å—å —è–∫ –º–µ–Ω–µ –±–∞—á–∏—Ç—å –®–Ü</h2>
            <p class="big-text">–ë–ª—É–∫–∞—é—á–∏ –ø—Ä–æ—Å—Ç–æ—Ä–∞–º–∏ —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç—É —Ç–∞ –Ω–∞–¥–∏—Ö–Ω—É–≤—à–∏—Å—å —ñ—Å—Ç–æ—Ä—ñ—î—é —Å—Ç–≤–æ—Ä–µ–Ω—è NFT, –º–µ–Ω—ñ –∑–∞—Ö–æ—Ç—ñ–ª–æ—Å—å —Å–ø—Ä–æ–±—É–≤–∞—Ç–∏ —Å—Ç–≤–æ—Ä–∏—Ç–∏ —â–æ—Å—å —Å–≤–æ—î —Ç–∞ –ø–æ–∫–∞–∑–∞—Ç–∏ —Ü–µ —Å–≤—ñ—Ç–æ–≤—ñ</p>
            <p>–Ø –±—ñ–ª—å—à –Ω—ñ–∂ —É–ø–µ–≤–Ω–µ–Ω–∞, —â–æ –∑–º–æ–∂—É –≤–∞—Å –∑–¥–∏–≤—É–≤–∞—Ç–∏ —Ç–∞ —Å—Ç–≤–æ—Ä–∏—Ç–∏ —â–æ—Å—å –Ω–∞—Å—Ç—ñ–ª—å–∫–∏ –∫—Ä—É—Ç–µ —Ç–∞ –Ω–µ–∑–≤–∏—á–∞–π–Ω–µ, —â–æ —ñ –≤–∏ —Ç–µ–∂ –∑–∞—Ö–æ—á–µ—Ç–µ —Å–ø—Ä–æ–±—É–≤–∞—Ç–∏ —Å–µ–±–µ –≤ —Ü—ñ–π —Å–ø—Ä–∞–≤—ñ!</p>
            <router-link to="/about" class="button">–±—ñ–ª—å—à–µ –ø—Ä–æ –º–µ–Ω–µ</router-link>
          </div>
        </div>
      </div>
    </section>
    
    <section class="mission-section">
      <div class="container">
        <div class="mission-content">
          <div class="mission-text">
            <h2 class="section-title">–ì–æ–ª–æ–≤–Ω–µ –∑–∞–≤–¥–∞–Ω–Ω—è ‚Äî —Å–ª—ñ–¥—É–≤–∞—Ç–∏ –∑–∞ –Ω–æ–≤–∏–º–∏ —Ç—Ä–µ–Ω–¥–∞–º–∏</h2>
            <p class="big-text">–î–ª—è —Ç–æ–≥–æ, —â–æ–± –≤ –ø—É—Å—Ç—É –Ω–µ –≤–∏—Ç—Ä–∞—á–∞—Ç–∏ —á–∞—Å –Ω–∞ —Ä–µ—á—ñ, —è–∫—ñ –¥–∞–≤–Ω–æ –∑–∞—Å—Ç–∞—Ä—ñ–ª–∏ —ñ –≤—Ç—Ä–∞—Ç–∏–ª–∏ —Å–≤–æ—é –∞–∫—Ç—É–∞–ª—å–Ω—ñ—Å—Ç—å, —Å–ª—ñ–¥ —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ —Å–∞–º–µ —Ç–µ, —â–æ –ø–æ–ø—É–ª—è—Ä–Ω–µ —Ç–∞ —Ü—ñ–∫–∞–≤–µ –ª—é–¥—è–º —Å–∞–º–µ –∑–∞—Ä–∞–∑!</p>
            <p>–ù–µ —Ç–∞–∫ –¥–∞–≤–Ω–æ –≤–∏–π—à–ª–∞ –Ω–æ–≤–∞ –∫–æ–º–ø'—é—Ç–µ—Ä–Ω–∞ –≥—Ä–∞ –ø—ñ–¥ –Ω–∞–∑–≤–æ—é ¬´Stalker 2¬ª, —â–æ –Ω–∞–±—Ä–∞–ª–∞ –¥—É–∂–µ –≤–µ–ª–∏–∫—É –ø–æ–ø—É–ª—è—Ä–Ω—ñ—Å—Ç—å. –°–∞–º–µ —Ç–æ–º—É –∑–∞ –º–æ—Ç–∏–≤–∞–º–∏ –¥–∞–Ω–æ—ó –≥—Ä–∏ —è –≤–∏—Ä—ñ—à–∏–ª–∞ —Å—Ç–≤–æ—Ä–∏—Ç–∏ —Å–≤–æ—é –∫–æ–ª–µ–∫—Ü—ñ—é, —è–∫—É –º–æ–∂–Ω–∞ –±—É–¥–µ –ø—Ä–∏–¥–±–∞—Ç–∏, –Ω–∞—Ç–∏—Å–Ω—É–≤—à–∏ –∫–Ω–æ–ø–∫—É –Ω–∏–∂—á–µ</p>
            <router-link to="/collection" class="button">–ø–µ—Ä–µ–π—Ç–∏</router-link>
          </div>
          <div class="mission-images">
            <div class="image-row">
              <img src="/images/stalker1.png" alt="Stalker NFT 1">
              <img src="/images/stalker2.png" alt="Stalker NFT 2">
            </div>
          </div>
        </div>
      </div>
    </section>
    
    <CollectionSlider />
    <section class="nft-info-section">
      <div class="container">
        <div class="nft-info-content">
          <div class="nft-info-text">
            <h2 class="section-title">NFT ‚Äî —Ü–µ –Ω–µ –ª–∏—à–µ –ø—Ä–æ —â–æ—Å—å –ø–æ–ø—É–ª—è—Ä–Ω–µ</h2>
            <p class="big-text">–ú–æ–∂–Ω–∞ —Å—Ç–≤–æ—Ä–∏—Ç–∏ —Å–ø—Ä–∞–≤–¥—ñ —Ö–æ—Ä–æ—à–∏–π –ø—Ä–æ–¥—É–∫—Ç —ñ–∑ –∑–≤–∏—á–∞–π–Ω–∏—Ö –∂–∏–≤–∏—Ö —Ñ–æ—Ç–æ —ñ–∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º –º—É–ª—å—Ç—è—à–Ω–æ–≥–æ —Å—Ç–∏–ª—é —Ç–∞ –º–æ–¥–µ–ª–µ–π –®–Ü</p>
            <p>–ü—Ä–∏—á–æ–º—É —Ç–∞–∫—ñ NFT –±—É–¥—É—Ç—å –º–∞—Ç–∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É —ñ–¥–µ–Ω—Ç–∏—á–Ω—ñ—Å—Ç—å, –∞–¥–∂–µ —à–∞–Ω—Å –ø–æ–≤—Ç–æ—Ä–∏—Ç–∏ —Å–∞–º–µ —Ç–∞–∫—É - –±—É–¥–µ –¥–æ–≤–æ–ª—ñ –º–∞–ª–∏–π, —è–∫—â–æ –Ω–∞–≤—ñ—Ç—å –Ω–µ —Ä—ñ–≤–Ω–∏–π –Ω—É–ª—é!</p>
            <div class="quote">
              <p>–¢—É—Ç –ø–æ—Ç—ñ–º –±—É–¥–µ —è–∫–∞—Å—å –¥—É–∂–µ –∫–ª–∞—Å–Ω–∞ —Ü–∏—Ç–∞—Ç–∞!</p>
            </div>
          </div>
          <div class="nft-info-image">
            <img src="/images/ya.png" alt="NFT Example">
          </div>
        </div>
      </div>
    </section>
    
     <Reviews ref="reviews" />
    
  <section class="feedback-section">
    <div class="container">
      <div class="feedback-content">
        <div class="feedback-form">
          <h2 class="section-title">–ó–∞–ª–∏—à–∏—Ç–∏ –≤—ñ–¥–≥—É–∫!</h2>
          <div class="divider"></div>
          <p>–í–∏ –º–æ–∂–µ—Ç–µ –∑–∞–ª–∏—à–∏—Ç–∏ –≤—ñ–¥–≥—É–∫ –ø—Ä–æ –º–æ—ó —Ä–æ–±–æ—Ç–∏ –∞–±–æ —Å–∞–π—Ç. –í—Ä–∞—Ö–æ–≤—É–π—Ç–µ, —â–æ –≤—ñ–¥–≥—É–∫–∏ –∑ º—è–≤–ª—è—é—Ç—å—Å—è –Ω–∞ —Å–∞–π—Ç—ñ, –∞ —Ç–∞–∫–æ–∂ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å —ó—Ö –∑–∞–ª–∏—à–∏—Ç–∏ —î –ª–∏—à–µ —É –∑–∞—Ä–µ—î—Å—Ç—Ä–æ–≤–∞–Ω–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤!</p>
          
          <form @submit.prevent="submitReview">
            <div class="form-row">
              <div class="form-group">
                <label for="name">–Ü–º'—è</label>
                <input type="text" id="name" v-model="review.name" required>
              </div>
              <div class="form-group">
                <label for="email">Email</label>
                <input type="email" id="email" v-model="review.email" required>
              </div>
            </div>
            <div class="form-group">
              <label for="message">–ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è</label>
              <textarea id="message" v-model="review.message" required></textarea>
            </div>
            <button type="submit" class="button">–ù–∞–¥—ñ—Å–ª–∞—Ç–∏</button>
          </form>
        </div>
        
        <div class="feedback-contacts">
          <h3>–ö–æ–Ω—Ç–∞–∫—Ç–∏</h3>
          <ul class="contact-list">
            <li>
              <span class="icon">üìç</span>
              <span>–õ—É—Ü—å–∫–∏–π –Ω–∞—Ü—ñ–æ–Ω–∞–ª—å–Ω–∏–π —Ç–µ—Ö–Ω—ñ—á–Ω–∏–π —É–Ω—ñ–≤–µ—Ä—Å–∏—Ç–µ—Ç, –≤—É–ª. –õ—å–≤—ñ–≤—Å—å–∫–∞ 75</span>
            </li>
            <li>
              <span class="icon">üìû</span>
              <span>+38 (068) 876-8765, +38 (063) 987--5884</span>
            </li>
            <li>
              <span class="icon">‚úâÔ∏è</span>
              <span>worobiovakarina@gmail.com</span>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </section>
  </main>
</template>

<script>
import MainBanner from '@/components/MainBanner.vue'
import CollectionSlider from '@/components/CollectionSlider.vue'
import Reviews from '@/components/Reviews.vue'
import { mapGetters } from 'vuex'

export default {
  name: 'Home',
  components: {
    MainBanner,
    CollectionSlider,
    Reviews
  },
  data() {
    return {
      review: {
        name: '',
        email: '',
        message: ''
      }
    }
  },
 computed: {
    ...mapGetters('auth', ['isAuthenticated', 'currentUser'])
  },
  methods: {
    async submitReview() {
      try {
        if (!this.$store.getters['auth/isAuthenticated']) {
          this.$store.commit('auth/SET_AUTH_MODAL', {
            show: true,
            context: 'register',
            review: { text: this.review.message }
          });
          return;
        }
        await this.$axios.post(
          '/reviews',
          { text: this.review.message },
          {
            headers: {
              Authorization: `Bearer ${this.$store.state.auth.token}`
            }
          }
        );
        this.review.message = '';
        this.$refs.reviews.fetchReviews();
        alert('–í—ñ–¥–≥—É–∫ —É—Å–ø—ñ—à–Ω–æ –¥–æ–¥–∞–Ω–æ!');
      } catch (error) {
        alert(`–ü–æ–º–∏–ª–∫–∞: ${error.response?.data?.message || error.message}`);
      }
    }
  },
  mounted() {
    this.$root.$on('submit-pending-review', async () => {
      if (this.$store.state.auth.pendingReview) {
        try {
          await this.$axios.post('/reviews', {
            text: this.$store.state.auth.pendingReview.text
          }, {
            headers: {
              Authorization: `Bearer ${this.$store.state.auth.token}`
            }
          })

          this.review = { name: '', email: '', message: '' }
          this.$refs.reviews.fetchReviews()
          alert('–î—è–∫—É—î–º–æ –∑–∞ –≤–∞—à –≤—ñ–¥–≥—É–∫!')
        } catch (error) {
          console.error('Error submitting pending review:', error)
        } finally {
          this.$store.commit('auth/SET_AUTH_MODAL', { show: false })
        }
      }
    })
  },
  beforeDestroy() {
    this.$root.$off('submit-pending-review')
  }
}
</script>

<style scoped>
.about-section {
  padding: 80px 0;
  background: white;
}

.about-content {
  display: flex;
  align-items: center;
  gap: 50px;
}

.about-image {
  flex: 1;
}

.about-image img {
  width: 100%;
  max-width: 400px;
  height: auto;
  border-radius: 10px;
}

.about-text {
  flex: 1;
}

.big-text {
  font-size: 18px;
  margin-bottom: 20px;
  color: #333;
}

.mission-section {
  padding: 80px 0;
  background: #f8f8f8;
}

.mission-content {
  display: flex;
  align-items: center;
  gap: 50px;
}

.mission-text {
  flex: 1;
}

.mission-images {
  flex: 1;
}

.image-row {
  display: flex;
  gap: 20px;
}

.image-row img {
  width: 50%;
  border-radius: 10px;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
}

.nft-info-section {
  padding: 80px 0;
  background: white;
}

.nft-info-content {
  display: flex;
  align-items: center;
  gap: 50px;
}

.nft-info-text {
  flex: 1;
}

.quote {
  margin-top: 30px;
  padding: 20px;
  background: #f8f8f8;
  border-left: 4px solid #8B8A4A;
  font-style: italic;
}

.nft-info-image {
  flex: 1;
}

.nft-info-image img {
  width: 100%;
  border-radius: 10px;
}

.feedback-section {
  padding: 80px 0;
  background: #f8f8f8;
}

.feedback-content {
  display: flex;
  gap: 50px;
}

.feedback-form {
  flex: 2;
}

.feedback-contacts {
  flex: 1;
}

.form-row {
  display: flex;
  gap: 20px;
  margin-bottom: 20px;
}

.form-group {
  flex: 1;
  margin-bottom: 20px;
}

.form-group label {
  display: block;
  margin-bottom: 5px;
  font-weight: 500;
}

.form-group input,
.form-group textarea {
  width: 100%;
  padding: 10px;
  border: 1px solid #ddd;
  border-radius: 5px;
}

.form-group textarea {
  height: 150px;
}

.contact-list {
  list-style: none;
}

.contact-list li {
  margin-bottom: 15px;
  display: flex;
  align-items: flex-start;
  gap: 10px;
}

.contact-list .icon {
  font-size: 20px;
}

.divider {
  width: 80px;
  height: 3px;
  background: #8B8A4A;
  margin: 15px 0;
}

@media (max-width: 768px) {
  .about-content,
  .mission-content,
  .nft-info-content,
  .feedback-content {
    flex-direction: column;
  }
  
  .image-row {
    flex-direction: column;
  }
  
  .image-row img {
    width: 100%;
  }
  
  .form-row {
    flex-direction: column;
    gap: 0;
  }
}
</style>